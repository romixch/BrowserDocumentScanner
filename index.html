<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Document detection</title>
  <meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <script src="stimulus-controllers.js" type="module"></script>

  <h2>Document detection</h2>
  <div data-controller="opencv-loading">
    <p data-opencv-loading-target="loading">OpenCV.js is loading...</p>
  </div>
  <div data-controller="document-detection">
    <button data-action="document-detection#switch" data-document-detection-target="switch">Start</button>
    <div>
      <video style="width: 90vw" playsinline autoplay data-document-detection-target="video"></video><br />
      <span data-document-detection-target="videoSize"></span>
      <canvas style="display:none" data-document-detection-target="canvas"></canvas>
    </div>
    <div>
      <canvas style="width: 90vw" data-document-detection-target="canvasOutput" data-action="click->document-detection#cutOut"></canvas>
    </div>
    <div>
      <canvas style="width: 90vw" data-document-detection-target="transformedOutput"></canvas>
    </div>
  </div>

  <script defer src="opencv.js" onload="window.dispatchEvent(new CustomEvent('opencv-loaded'));"></script>
  <script async src="document-detection.js" type="text/javascript"></script>
</body>

</html>